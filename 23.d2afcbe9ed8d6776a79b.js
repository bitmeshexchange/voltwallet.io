(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1114:function(e,t,n){"use strict";n.r(t);var r,a,o,i=n(1),c=n.n(i),u=n(165),s=n(1049),l=n.n(s),f=n(18),p=n(1187),m=(n(565),n(285)),y=(n(1153),n(1156)),b=(n(564),n(166)),d=(n(1154),n(1155)),h=n(69),v=n(1124),g=n(1148),w=n(76),O=n(1152),j=n(1077),E=n.n(j),k=n(1257),_=n(287),x=n(15);n(60);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){P(o,r,a,i,c,"next",e)}function c(e){P(o,r,a,i,c,"throw",e)}i(void 0)}))}}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){W(e,t,n[t])}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M,D=d.a.Item,F=(r=d.a.create(),a=Object(u.connect)((function(e){var t=e.user,n=e.wallet,r=e.loading.effects;return T({},t,n,{loading:r["wallet/queryParties"]||r["service/queryPaymailById"]})})),Object(h.withRouter)(o=r(o=a(o=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=C(t).call(this,e),n=!a||"object"!==S(a)&&"function"!=typeof a?I(r):a,W(I(n),"gotoBack",(function(){var e=n.props,t=e.match,r=e.history,a=e.currentWallet,o=t.params.id,i=a.token,c="list";1===i?c="bsv":3===i&&(c="eth"),r.push({pathname:"/money/".concat(c,"/").concat(o)})})),W(I(n),"showMembers",(function(){n.setState({visible:!0})})),W(I(n),"hideMembers",(function(){n.setState({visible:!1})})),W(I(n),"editPaymail",(function(e){n.props.history.push({pathname:"/money/paymail/".concat(e)})})),W(I(n),"setName",(function(){n.setState({editing:!0})})),W(I(n),"handleSubmit",(function(e){e.preventDefault();var t=n.props.match.params.id;n.props.form.validateFields(function(){var e=N(regeneratorRuntime.mark((function e(r,a){var o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=10;break}if(o=n.props.currentWallet,(i=a.name.trim())!==o.name){e.next=5;break}return e.abrupt("return",n.setState({editing:!1}));case 5:return c=T({},a,{wid:parseInt(t)}),e.next=8,n.props.dispatch({type:"service/setName",payload:c});case 8:e.sent&&(b.a.success(Object(f.a)("edit_name_success")),o.name=i,n.updateWallet(),n.props.dispatch({type:"wallet/saveCurrent",payload:o}),n.setState({editing:!1}));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())})),W(I(n),"archived",N(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.id,r=n.props.currentWallet.type,e.next=4,n.props.dispatch({type:"service/archive",payload:{wid:parseInt(t)}});case 4:if(a=e.sent){e.next=7;break}return e.abrupt("return",b.a.error(Object(f.a)("failure")));case 7:if(401!==a.code){e.next=9;break}return e.abrupt("return",b.a.error(Object(f.a)("failure")+Object(f.a)("archiveWithoutPermission")));case 9:if(402!==a.code){e.next=11;break}return e.abrupt("return",b.a.error(Object(f.a)("failure")+Object(f.a)("hasBalance")));case 11:if(403!==a.code){e.next=13;break}return e.abrupt("return",b.a.error(Object(f.a)("failure")+Object(f.a)("hasPaymail")));case 13:return b.a.success(Object(f.a)("archived_success")),e.next=16,n.props.dispatch({type:"service/updateWallet",payload:{type:parseInt(r)}});case 16:n.props.history.push({pathname:"/money/home/0"});case 17:case"end":return e.stop()}}),e)})))),n.state={visible:!1,editing:!1},n}var n,r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,e),n=t,(r=[{key:"updateWallet",value:(o=N(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.currentWallet.type,e.next=3,this.props.dispatch({type:"service/updateWallet",payload:{type:parseInt(t)}});case 3:e.sent,this.setState({joining:!1});case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props,n=t.currentWallet,r=t.loading;if(!n||!n.id)return c.a.createElement(_.a,null);var a,o=this.props,i=o.form,u=o.userid,s=o.wallets,l=n.id,p=n.createtime,b=n.name,h=n.type,j=n.token,S=n.paymail,P=n.founder,N=n.founderId,R=n.total,C=i.getFieldDecorator,I=Object(x.e)(j);3!==j&&(R=Object(v.d)(R)),S&&S.length>0&&((a=S.find((function(e){return 1===e.main})))||(a=S[0]));var B=this.state.visible;return c.a.createElement("div",{style:{height:"100%",overflowY:"auto"}},c.a.createElement("div",{className:E.a.container},c.a.createElement(O.a,{token:j}),c.a.createElement("div",{className:E.a.label},Object(f.a)("wallet_name")),c.a.createElement(d.a,{hideRequiredMark:!0},this.state.editing?c.a.createElement("div",{className:E.a.form},c.a.createElement(D,null,C("name",{initialValue:b,rules:[{required:!0}]})(c.a.createElement(y.a,{addonAfter:c.a.createElement("div",{onClick:this.handleSubmit},Object(f.a)("save"))})))):c.a.createElement("div",{className:E.a.value},b," ",u===N&&c.a.createElement("span",{className:E.a.op_icon,onClick:this.setName},c.a.createElement(w.a,{type:"iconpencil"})))),2===h&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:E.a.label},Object(f.a)("key_share_members")),c.a.createElement("div",{className:E.a.value,onClick:this.showMembers,style:{cursor:"pointer"}},Object(f.a)("check_status")," ",c.a.createElement("span",{className:E.a.op_icon},c.a.createElement(w.a,{type:"iconicon-keyshare-member-online"}))),c.a.createElement("div",{className:E.a.label},Object(f.a)("wallet_owner")),c.a.createElement("div",{className:E.a.value},c.a.createElement(m.a,{spinning:r},P))),1===j&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:E.a.label},Object(f.a)("wallet_paymail")),S&&S.length>0&&c.a.createElement("div",{className:E.a.value},a.name,"@","volt.id"),c.a.createElement("div",{onClick:function(){return e.editPaymail(l)},className:E.a.edit_paymail},2===h&&u!==N?Object(f.a)("view_paymail"):Object(f.a)("edit_paymail"))),c.a.createElement("div",{className:E.a.label},Object(f.a)("time_created")),c.a.createElement("div",{className:E.a.value1},Object(v.c)(p)),c.a.createElement("div",{className:E.a.label},Object(f.a)("current_balance")),c.a.createElement("div",{className:E.a.value1},R," ",I," | ",c.a.createElement(g.a,{token:j,value:n.total})),(1===h&&s[1].length>1||2==h)&&c.a.createElement("div",{className:E.a.label},c.a.createElement("span",{className:E.a.archived,onClick:this.archived},Object(f.a)("archived_account"))),c.a.createElement("span",{className:E.a.goback,onClick:this.gotoBack}," ",Object(f.a)("cancel")),B&&c.a.createElement(k.a,{visible:B,cancel:this.hideMembers})))}}])&&R(n.prototype,r),a&&R(n,a),t}(i.Component))||o)||o)||o);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",(function(){return G}));var G=Object(u.connect)((function(e){var t=e.wallet;e.loading.effects;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Y(e,t,n[t])}))}return e}({},t)}))(M=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,U(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,e),n=t,(r=[{key:"getWalletId",value:function(){return this.props.match.params.id}},{key:"ready",value:function(){var e=parseInt(this.getWalletId());this.getWalletDetail(e)}},{key:"render",value:function(){return c.a.createElement("div",{className:l.a.container},c.a.createElement("div",{className:l.a.detail},c.a.createElement(F,null)))}}])&&q(n.prototype,r),a&&q(n,a),t}(p.a))||M},1124:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"j",(function(){return y})),n.d(t,"i",(function(){return b})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return w})),n.d(t,"f",(function(){return O})),n.d(t,"a",(function(){return k}));n(1141);var r=n(3),a=n.n(r),o=n(60),i=n.n(o),c=n(284),u=n(52),s=n.n(u).a.parse(window.location.search),l=window.location;function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return e?("string"==typeof e&&/^\d+$/.test(e)&&(e=parseInt(e,10)),a()(e).format(t)):e}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";if(!e)return"";var n=e;"number"==typeof e?n=new Date(e):"string"==typeof e&&(n=new Date(+e));var r={"y+":n.getFullYear(),"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),"S+":n.getMilliseconds()};for(var a in r)if(new RegExp("("+a+")").test(t))if("y+"===a)t=t.replace(RegExp.$1,(""+r[a]).substr(4-RegExp.$1.length));else if("S+"===a){var o=RegExp.$1.length;o=1===o?3:o,t=t.replace(RegExp.$1,("00"+r[a]).substr((""+r[a]).length-1,o))}else t=t.replace(RegExp.$1,1===RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length));return t}var m=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/;function y(e){return!!e&&m.test(e)}function b(e){if(!e)return e;if(!parseFloat(e))return 0;for(var t="",n=0,r=(e=(e||0).toString()).split("."),a=r[0],o=a.length-1;o>=0;o--)n++,t=a.charAt(o)+t,n%3||0==o||(t=","+t);return 1===r.length?t:t+"."+r[1]}function d(){return Array.prototype.slice.call(arguments).join(" ")}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[2,7];if(e)return e.length<t[0]+t[1]?e:e.substr(0,t[0])+"****"+e.substr(-t[1],t[1])}var v,g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(!e)return 0;var n=e.toString().split(".");return e.toString().indexOf("e")>-1||n[1]&&n[1].length>t?i()(e).toFixed(t):e},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return i()(e).div(Math.pow(10,t)).toString()},O=function(){var e=c.a.findIndex((function(e){return"usd"===e.currencyCode.toLowerCase()})),t=window.localStorage.getItem("VoltLocalCurrencyIndex")||e,n=c.a[t];return n||(window.localStorage.removeItem("VoltLocalCurrencyIndex"),n=c.a[e]),n};function j(e,t,n,r,a){!function(e,t,n,r,a,o){if(e>n||e<t){var i,c="bigint"==typeof t?"n":"";throw i=o>3?0===t||t===BigInt(0)?">= 0".concat(c," and < 2").concat(c," ** ").concat(8*(o+1)).concat(c):">= -(2".concat(c," ** ").concat(8*(o+1)-1).concat(c,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(c):">= ".concat(t).concat(c," and <= ").concat(n).concat(c),new errors.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){E(t,"offset"),(void 0===e[t]||void 0===e[t+n])&&function(e,t,n){if(Math.floor(e)!==e)throw E(e,n),new errors.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new errors.ERR_BUFFER_OUT_OF_BOUNDS;throw new errors.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}(t,e.length-(n+1))}(r,a,o)}(t,r,a,e,n,7);var o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;var i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,n}function E(e,t){if("number"!=typeof e)throw new errors.ERR_INVALID_ARG_TYPE(t,"number",e)}e.prototype.writeBigUInt64LE=(v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return j(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))},"undefined"==typeof BigInt?BufferBigIntNotDefined:v);var k=function(e){return(s.wss&&s.wss.indexOf("voltpre.bitmesh.com")>-1||l.pathname.indexOf("test.html")>-1)&&(e=e.replace("volt.bitmesh.com","voltpre.bitmesh.com")),e}}).call(this,n(20).Buffer)},1141:function(e,t,n){"use strict";
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */e.exports=function(e,t){if("string"==typeof e)return u(e);if("number"==typeof e)return c(e,t);return null},e.exports.format=c,e.exports.parse=u;var r=/\B(?=(\d{3})+(?!\d))/g,a=/(?:\.0*|(\.[^0]+)0+)$/,o={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:1024*(1<<30)},i=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb)$/i;function c(e,t){if(!Number.isFinite(e))return null;var n=Math.abs(e),i=t&&t.thousandsSeparator||"",c=t&&t.unitSeparator||"",u=t&&void 0!==t.decimalPlaces?t.decimalPlaces:2,s=Boolean(t&&t.fixedDecimals),l=t&&t.unit||"";l&&o[l.toLowerCase()]||(l=n>=o.tb?"TB":n>=o.gb?"GB":n>=o.mb?"MB":n>=o.kb?"KB":"B");var f=(e/o[l.toLowerCase()]).toFixed(u);return s||(f=f.replace(a,"$1")),i&&(f=f.replace(r,i)),f+c+l}function u(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,n=i.exec(e),r="b";return n?(t=parseFloat(n[1]),r=n[4].toLowerCase()):(t=parseInt(e,10),r="b"),Math.floor(o[r]*t)}},1148:function(e,t,n){"use strict";var r,a=n(1),o=n.n(a),i=n(165),c=(n(284),n(60)),u=n.n(c),s=n(15),l=n(1124);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=Object(l.f)(),v=Object(i.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}({},e.wallet)}))(r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,y(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.price,n=e.value,r=e.usd,a=e.exchangeRate,i=e.token,c=e.tokenAmount,l=s.v[i||1].name.toLowerCase();if(!t[l])return null;var f=null,p=h.currencyCode.toLowerCase();f=t[l][p]?t[l][p]:u()(t[l].usd).times(a[p]),r&&(f=u()(f).div(t[l].usd).multipliedBy(r));var m=0;return m=3===i?(m=(m=u()(n).times(f)).plus(c||0)).toFixed(2,1):u()(n).div(1e8).times(f).toFixed(2,1),o.a.createElement("span",null,h.symbol,m," ",h.currencyCode)}}])&&p(n.prototype,r),a&&p(n,a),t}(a.Component))||r;t.a=v},1152:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(1),a=n.n(r),o=n(76),i=n(1050),c=n.n(i),u=n(15);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,p(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.className||c.a.icon,t=this.props.token||1;return a.a.createElement("div",{className:e},a.a.createElement(o.a,{type:Object(u.o)(t).icon}))}}])&&l(n.prototype,r),i&&l(n,i),t}(r.Component)},1187:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(1),a=n.n(r),o=n(1049),i=n.n(o);n(18),n(1144);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,c,"next",e)}function c(e){u(o,r,a,i,c,"throw",e)}i(void 0)}))}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=f(this,p(t).call(this,e))).state={ready:!1},n}var n,r,o,c,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.currentWallet()}},{key:"getWalletId",value:function(e,t){if(void 0===t)for(var n=0;n<e.length;n++){t=e[n].id;break}return t}},{key:"currentWallet",value:(u=s(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.dispatch,r=t.match,a=this.props.currentWallet,o=r.params.id,e.next=5,n({type:"service/queryWalletById",payload:{wid:parseInt(o)}});case 5:if(1!==(a=e.sent).type){e.next=12;break}if(a.address||a.deposit){e.next=12;break}return e.next=10,n({type:"service/createSingleWalletAddress",payload:{wid:o}});case 10:(i=e.sent)&&n({type:"wallet/saveCurrentAddress",payload:{address:i}});case 12:if(a.change||3===a.token){e.next=17;break}return e.next=15,n({type:2===a.type?"service/createMultiPartyAddress":"service/createSingleWalletAddress",payload:{wid:o,type:2}});case 15:(c=e.sent)&&n({type:"wallet/saveCurrentChangeAddress",payload:{address:c}});case 17:this.ready&&this.ready(parseInt(o));case 18:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"getWalletDetail",value:(c=s(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,c,u,s,l,f,p,m,y,b,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.dispatch,a=n.allWallets,o=n.currentWallet,i=n.ercTokenTimestamp,c=n.ercToken,n.bsvTokenTimestamp,n.bsvToken,u=a[t],o&&o.id==t&&(u=o),u){e.next=5;break}return e.abrupt("return");case 5:if(3===o.token&&c.length<1&&r({type:"wallet/queryErcToken",payload:{timestamp:i}}),u.parties&&!(u.parties.length<1)){e.next=11;break}return e.next=9,r({type:"wallet/queryParties",payload:{id:t}});case 9:s=e.sent,u.parties=s;case 11:if(u.paymail&&!(u.paymail.length<1)){e.next=16;break}return e.next=14,r({type:"service/queryPaymailById",payload:{wid:t}});case 14:l=e.sent,u.paymail=l;case 16:if(!(u.parties&&u.parties.length>0)){e.next=36;break}for(f=!0,p=!1,m=void 0,e.prev=20,y=u.parties[Symbol.iterator]();!(f=(b=y.next()).done);f=!0)(d=b.value).uid===u.uid&&(u.founder=d.user,u.founderId=d.uid);e.next=28;break;case 24:e.prev=24,e.t0=e.catch(20),p=!0,m=e.t0;case 28:e.prev=28,e.prev=29,f||null==y.return||y.return();case 31:if(e.prev=31,!p){e.next=34;break}throw m;case 34:return e.finish(31);case 35:return e.finish(28);case 36:r({type:"wallet/saveCurrent",payload:u});case 37:case"end":return e.stop()}}),e,this,[[20,24,28,36],[29,,31,35]])}))),function(e){return c.apply(this,arguments)})},{key:"render",value:function(){return a.a.createElement("div",{className:i.a.container},a.a.createElement("div",{className:i.a.detail}))}}])&&l(n.prototype,r),o&&l(n,o),t}(r.Component)},1257:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));n(570);var r,a=n(292),o=(n(565),n(285)),i=n(1),c=n.n(i),u=n(165),s=n(1124),l=n(51),f=n(76),p=n(1065),m=n.n(p),y=n(18);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){d(o,r,a,i,c,"next",e)}function c(e){d(o,r,a,i,c,"throw",e)}i(void 0)}))}}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=Object(u.connect)((function(e){var t=e.user,n=e.wallet,r=e.loading.effects;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){j(e,t,n[t])}))}return e}({},t,n,{partiesLoading:r["wallet/queryParties"]||r["wallet/checkOnline"]||!1})}))(r=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=g(this,w(t).call(this,e))).state={loading:!1},n}var n,r,i,u,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:(p=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.checkStatus();case 1:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"checkStatus",value:(u=h(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.currentWallet,r=t.dispatch,this.setState({loading:!0}),n.parties){e.next=5;break}return e.next=5,r({type:"wallet/queryParties",payload:{id:n.id}});case 5:if(0!==n.status){e.next=8;break}return e.next=8,r({type:"wallet/checkOnline",payload:{id:n.id,users:n.parties}});case 8:if(a=this.props,o=a.approve,i=a.txid,c=n.parties,!(o&&o.length>0)){e.next=15;break}return e.next=13,l.a.querySignDetail(i);case 13:u=e.sent,c.forEach((function(e,t){c[t].time="";for(var n=0;n<u.length;n++)e.uid===u[n].uid&&(c[t].time=u[n].createtime,c[t].status=u[n].status)}));case 15:this.setState({parties:c}),this.setState({loading:!1});case 17:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=e.currentWallet,n=e.visible,r=e.partiesLoading,i=e.cancel,u=e.approve,l=e.st,p=t.name,b=t.share,d=t.status,h=t.createtime,v=this.state,g=v.parties,w=v.loading;return c.a.createElement(a.a,{width:600,title:null,visible:n,footer:null,onCancel:i},c.a.createElement("div",{className:m.a.body},c.a.createElement("div",{className:m.a.title},"".concat(p," - ").concat(Object(y.a)("key_share_members"))),c.a.createElement("div",{className:m.a.desc},Object(y.a)("created_on")," ",Object(s.c)(h)," | ",b," ",Object(y.a)("members")," ",u&&"| ".concat(u.length," ").concat(Object(y.a)("signee_signed"))),c.a.createElement(o.a,{spinning:r||w},g&&g.map((function(e,t){var n=e.user,r=e.online,a=e.uid,o=e.time;if(n)return 0===d?c.a.createElement("div",{className:m.a.item,key:n},c.a.createElement(f.a,{type:r?"iconicon-keyshare-member-online":"iconicon-keyshare-member-offline"}),c.a.createElement("span",{className:m.a.no},t+1),c.a.createElement("span",{className:m.a.email},n),1===e.status?c.a.createElement("span",{className:m.a.joined},Object(y.a)("joined").toUpperCase()):c.a.createElement("span",{className:m.a.pending},Object(y.a)("pending").toUpperCase())):c.a.createElement("div",{className:m.a.item,key:n},r?c.a.createElement(f.a,{type:"iconicon-keyshare-member-online"}):c.a.createElement(f.a,{type:"iconicon-keyshare-member-offline"}),c.a.createElement("span",{className:m.a.no},t+1),c.a.createElement("span",{className:m.a.email},n),u&&c.a.createElement("span",{className:m.a.time},Object(s.c)(o)),u&&(u.indexOf(a)>-1?c.a.createElement("span",{className:m.a.signed},Object(y.a)("signed").toUpperCase()):c.a.createElement("span",{className:m.a.pending},Object(y.a)(2===l?"unsigned2":"unsigned").toUpperCase())))})))))}}])&&v(n.prototype,r),i&&v(n,i),t}(i.Component))||r}}]);