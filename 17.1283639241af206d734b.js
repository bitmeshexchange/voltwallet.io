(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1079:function(e,t,n){"use strict";n.r(t);var r,a,o,i=n(1),c=n.n(i),u=n(165),s=n(1037),l=n.n(s),p=n(19),f=n(1131),y=(n(561),n(282)),m=(n(1118),n(1119)),d=(n(562),n(166)),b=(n(1109),n(1115)),h=n(75),v=n(1091),g=n(1116),w=n(138),O=n(1106),j=n(1063),k=n.n(j),E=n(1168),x=n(283),S=n(15);n(66);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){P(o,r,a,i,c,"next",e)}function c(e){P(o,r,a,i,c,"throw",e)}i(void 0)}))}}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){T(e,t,n[t])}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D,B=b.a.Item,q=(r=b.a.create(),a=Object(u.connect)((function(e){var t=e.user,n=e.wallet,r=e.loading.effects;return M({},t,n,{loading:r["wallet/queryParties"]||r["service/queryPaymailById"]})})),Object(h.withRouter)(o=r(o=a(o=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=R(t).call(this,e),n=!a||"object"!==_(a)&&"function"!=typeof a?I(r):a,T(I(n),"gotoBack",(function(){var e=n.props.match.params.id;n.props.history.push({pathname:"/money/list/".concat(e)})})),T(I(n),"showMembers",(function(){n.setState({visible:!0})})),T(I(n),"hideMembers",(function(){n.setState({visible:!1})})),T(I(n),"editPaymail",(function(e){n.props.history.push({pathname:"/money/paymail/".concat(e)})})),T(I(n),"setName",(function(){n.setState({editing:!0})})),T(I(n),"handleSubmit",(function(e){e.preventDefault();var t=n.props.match.params.id;n.props.form.validateFields(function(){var e=N(regeneratorRuntime.mark((function e(r,a){var o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=10;break}if(o=n.props.currentWallet,(i=a.name.trim())!==o.name){e.next=5;break}return e.abrupt("return",n.setState({editing:!1}));case 5:return c=M({},a,{wid:parseInt(t)}),e.next=8,n.props.dispatch({type:"service/setName",payload:c});case 8:e.sent&&(d.a.success(Object(p.a)("edit_name_success")),o.name=i,n.updateWallet(),n.props.dispatch({type:"wallet/saveCurrent",payload:o}),n.setState({editing:!1}));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())})),T(I(n),"archived",N(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.id,r=n.props.currentWallet.type,e.next=4,n.props.dispatch({type:"service/archive",payload:{wid:parseInt(t)}});case 4:if(a=e.sent){e.next=7;break}return e.abrupt("return",d.a.error(Object(p.a)("failure")));case 7:if(401!==a.code){e.next=9;break}return e.abrupt("return",d.a.error(Object(p.a)("failure")+Object(p.a)("archiveWithoutPermission")));case 9:if(402!==a.code){e.next=11;break}return e.abrupt("return",d.a.error(Object(p.a)("failure")+Object(p.a)("hasBalance")));case 11:if(403!==a.code){e.next=13;break}return e.abrupt("return",d.a.error(Object(p.a)("failure")+Object(p.a)("hasPaymail")));case 13:return d.a.success(Object(p.a)("archived_success")),e.next=16,n.props.dispatch({type:"service/updateWallet",payload:{type:parseInt(r)}});case 16:n.props.history.push({pathname:"/money/home/0"});case 17:case"end":return e.stop()}}),e)})))),n.state={visible:!1,editing:!1},n}var n,r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,e),n=t,(r=[{key:"updateWallet",value:(o=N(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.currentWallet.type,e.next=3,this.props.dispatch({type:"service/updateWallet",payload:{type:parseInt(t)}});case 3:e.sent,this.setState({joining:!1});case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props,n=t.currentWallet,r=t.loading;if(!n||!n.id)return c.a.createElement(x.a,null);var a,o=this.props,i=o.form,u=o.userid,s=o.wallets,l=n.id,f=n.createtime,d=n.name,h=n.type,j=n.token,_=n.paymail,P=n.founder,N=n.founderId,C=n.total,R=i.getFieldDecorator,I=Object(S.e)(j);3!==j&&(C=Object(v.c)(C)),_&&_.length>0&&((a=_.find((function(e){return 1===e.main})))||(a=_[0]));var W=this.state.visible;return c.a.createElement("div",{style:{height:"100%",overflowY:"auto"}},c.a.createElement("div",{className:k.a.container},c.a.createElement(O.a,{token:j}),c.a.createElement("div",{className:k.a.label},Object(p.a)("wallet_name")),c.a.createElement(b.a,{hideRequiredMark:!0},this.state.editing?c.a.createElement("div",{className:k.a.form},c.a.createElement(B,null,R("name",{initialValue:d,rules:[{required:!0}]})(c.a.createElement(m.a,{addonAfter:c.a.createElement("div",{onClick:this.handleSubmit},Object(p.a)("save"))})))):c.a.createElement("div",{className:k.a.value},d," ",u===N&&c.a.createElement("span",{className:k.a.op_icon,onClick:this.setName},c.a.createElement(w.a,{type:"iconpencil"})))),2===h&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:k.a.label},Object(p.a)("key_share_members")),c.a.createElement("div",{className:k.a.value,onClick:this.showMembers,style:{cursor:"pointer"}},Object(p.a)("check_status")," ",c.a.createElement("span",{className:k.a.op_icon},c.a.createElement(w.a,{type:"iconicon-keyshare-member-online"}))),c.a.createElement("div",{className:k.a.label},Object(p.a)("wallet_owner")),c.a.createElement("div",{className:k.a.value},c.a.createElement(y.a,{spinning:r},P))),1===j&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:k.a.label},Object(p.a)("wallet_paymail")),_&&_.length>0&&c.a.createElement("div",{className:k.a.value},a.name,"@","volt.id"),c.a.createElement("div",{onClick:function(){return e.editPaymail(l)},className:k.a.edit_paymail},2===h&&u!==N?Object(p.a)("view_paymail"):Object(p.a)("edit_paymail"))),c.a.createElement("div",{className:k.a.label},Object(p.a)("time_created")),c.a.createElement("div",{className:k.a.value1},Object(v.b)(f)),c.a.createElement("div",{className:k.a.label},Object(p.a)("current_balance")),c.a.createElement("div",{className:k.a.value1},C," ",I," | ",c.a.createElement(g.a,{token:j,value:n.total})),(1===h&&s[1].length>1||2==h)&&c.a.createElement("div",{className:k.a.label},c.a.createElement("span",{className:k.a.archived,onClick:this.archived},Object(p.a)("archived_account"))),c.a.createElement("span",{className:k.a.goback,onClick:this.gotoBack}," ",Object(p.a)("cancel")),W&&c.a.createElement(E.a,{visible:W,cancel:this.hideMembers})))}}])&&C(n.prototype,r),a&&C(n,a),t}(i.Component))||o)||o)||o);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",(function(){return V}));var V=Object(u.connect)((function(e){var t=e.wallet;e.loading.effects;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){U(e,t,n[t])}))}return e}({},t)}))(D=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,A(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,e),n=t,(r=[{key:"getWalletId",value:function(){return this.props.match.params.id}},{key:"ready",value:function(){var e=parseInt(this.getWalletId());this.getWalletDetail(e)}},{key:"render",value:function(){return c.a.createElement("div",{className:l.a.container},c.a.createElement("div",{className:l.a.detail},c.a.createElement(q,null)))}}])&&$(n.prototype,r),a&&$(n,a),t}(f.a))||D},1091:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"h",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return y})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return b}));n(1103);var r=n(3),a=n.n(r),o=n(66),i=n.n(o),c=n(281);window.location;function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return e?("string"==typeof e&&/^\d+$/.test(e)&&(e=parseInt(e,10)),a()(e).format(t)):e}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";if(!e)return"";var n=e;"number"==typeof e?n=new Date(e):"string"==typeof e&&(n=new Date(+e));var r={"y+":n.getFullYear(),"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),"S+":n.getMilliseconds()};for(var a in r)if(new RegExp("("+a+")").test(t))if("y+"===a)t=t.replace(RegExp.$1,(""+r[a]).substr(4-RegExp.$1.length));else if("S+"===a){var o=RegExp.$1.length;o=1===o?3:o,t=t.replace(RegExp.$1,("00"+r[a]).substr((""+r[a]).length-1,o))}else t=t.replace(RegExp.$1,1===RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length));return t}var l=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/;function p(e){return!!e&&l.test(e)}function f(){return Array.prototype.slice.call(arguments).join(" ")}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[2,7];if(e)return e.length<t[0]+t[1]?e:e.substr(0,t[0])+"****"+e.substr(-t[1],t[1])}var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=e.toString().split(".");return n[1]&&n[1].length>t?i()(e).toFixed(t):e},d=function(e){return i()(e).div(1e8).toString()},b=function(){var e=c.a.findIndex((function(e){return"usd"===e.currencyCode.toLowerCase()})),t=window.localStorage.getItem("VoltLocalCurrencyIndex")||e,n=c.a[t];return n||(window.localStorage.removeItem("VoltLocalCurrencyIndex"),n=c.a[e]),n}},1103:function(e,t,n){"use strict";
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */e.exports=function(e,t){if("string"==typeof e)return u(e);if("number"==typeof e)return c(e,t);return null},e.exports.format=c,e.exports.parse=u;var r=/\B(?=(\d{3})+(?!\d))/g,a=/(?:\.0*|(\.[^0]+)0+)$/,o={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:1024*(1<<30)},i=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb)$/i;function c(e,t){if(!Number.isFinite(e))return null;var n=Math.abs(e),i=t&&t.thousandsSeparator||"",c=t&&t.unitSeparator||"",u=t&&void 0!==t.decimalPlaces?t.decimalPlaces:2,s=Boolean(t&&t.fixedDecimals),l=t&&t.unit||"";l&&o[l.toLowerCase()]||(l=n>=o.tb?"TB":n>=o.gb?"GB":n>=o.mb?"MB":n>=o.kb?"KB":"B");var p=(e/o[l.toLowerCase()]).toFixed(u);return s||(p=p.replace(a,"$1")),i&&(p=p.replace(r,i)),p+c+l}function u(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,n=i.exec(e),r="b";return n?(t=parseFloat(n[1]),r=n[4].toLowerCase()):(t=parseInt(e,10),r="b"),Math.floor(o[r]*t)}},1106:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(1),a=n.n(r),o=n(138),i=n(1038),c=n.n(i),u=n(15);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,f(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.className||c.a.icon,t=this.props.token||1;return a.a.createElement("div",{className:e},a.a.createElement(o.a,{type:Object(u.m)(t).icon}))}}])&&l(n.prototype,r),i&&l(n,i),t}(r.Component)},1116:function(e,t,n){"use strict";var r,a=n(1),o=n.n(a),i=n(165),c=(n(281),n(66)),u=n.n(c),s=n(15),l=n(1091);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=Object(l.e)(),v=Object(i.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}({},e.wallet)}))(r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,m(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.price,n=e.value,r=e.usd,a=e.exchangeRate,i=e.token,c=s.r[i||1].name.toLowerCase();if(!t[c])return null;var l=null,p=h.currencyCode.toLowerCase();l=t[c][p]?t[c][p]:u()(t[c].usd).times(a[p]),r&&(l=u()(l).div(t[c].usd).multipliedBy(r));var f=0;return f=3===i?u()(n).times(l).toFixed(2,1):u()(n).div(1e8).times(l).toFixed(2,1),o.a.createElement("span",null,h.symbol,f," ",h.currencyCode)}}])&&f(n.prototype,r),a&&f(n,a),t}(a.Component))||r;t.a=v},1131:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(1),a=n.n(r),o=n(1037),i=n.n(o);n(19),n(1100);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,c,"next",e)}function c(e){u(o,r,a,i,c,"throw",e)}i(void 0)}))}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=p(this,f(t).call(this,e))).state={ready:!1},n}var n,r,o,c,u,m,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:(d=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.currentWallet();case 1:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"getWalletId",value:function(e,t){if(void 0===t)for(var n=0;n<e.length;n++){t=e[n].id;break}return t}},{key:"currentWallet",value:(m=s(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.dispatch,r=t.match,a=this.props.currentWallet,o=r.params.id,a.id&&a.id===parseInt(o)){e.next=7;break}return e.next=6,n({type:"service/queryWalletById",payload:{wid:parseInt(o)}});case 6:a=e.sent;case 7:if(1!==a.type){e.next=13;break}if(a.address||a.deposit){e.next=13;break}return e.next=11,n({type:"service/createSingleWalletAddress",payload:{wid:o}});case 11:(i=e.sent)&&n({type:"wallet/saveCurrentAddress",payload:{address:i}});case 13:this.ready&&this.ready(parseInt(o));case 14:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"saveCurrentWallet",value:(u=s(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.dispatch,t=parseInt(t)||1,(a=this.props.wallets[t])&&!(a.length<1)){e.next=8;break}return e.next=6,r({type:"service/queryWallet",payload:{type:t}});case 6:(a=e.sent).length>0&&a.forEach(function(){var e=s(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==parseInt(t.type)||t.deposit&&t.deposit.address){e.next=3;break}return e.next=3,r({type:"service/createSingleWalletAddress",payload:{wid:t.id}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:return o=-1,a&&a.length>0&&(o=this.getWalletId(a,n)),i=this.props.allWallets[o],e.next=13,this.props.dispatch({type:"wallet/save",payload:{currentId:o,currentWallet:i}});case 13:if(!i||1!==parseInt(i.type)||i.deposit&&i.deposit.address){e.next=16;break}return e.next=16,r({type:"service/createSingleWalletAddress",payload:{wid:o}});case 16:this.setState({ready:!0}),(c=document.getElementById("J_currentWallet"))&&c.scrollIntoView(),this.ready&&this.ready(parseInt(o));case 20:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"getWalletDetail",value:(c=s(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,c,u,s,l,p,f,y,m,d,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.dispatch,a=n.allWallets,o=n.currentWallet,i=n.ercTokenTimestamp,c=n.ercToken,u=a[t],o&&o.id==t&&(u=o),u){e.next=5;break}return e.abrupt("return");case 5:if(3===o.token&&c.length<1&&r({type:"wallet/queryErcToken",payload:{timestamp:i}}),u.parties&&!(u.parties.length<1)){e.next=11;break}return e.next=9,r({type:"wallet/queryParties",payload:{id:t}});case 9:s=e.sent,u.parties=s;case 11:if(u.paymail&&!(u.paymail.length<1)){e.next=16;break}return e.next=14,r({type:"service/queryPaymailById",payload:{wid:t}});case 14:l=e.sent,u.paymail=l;case 16:if(!(u.parties&&u.parties.length>0)){e.next=36;break}for(p=!0,f=!1,y=void 0,e.prev=20,m=u.parties[Symbol.iterator]();!(p=(d=m.next()).done);p=!0)(b=d.value).uid===u.uid&&(u.founder=b.user,u.founderId=b.uid);e.next=28;break;case 24:e.prev=24,e.t0=e.catch(20),f=!0,y=e.t0;case 28:e.prev=28,e.prev=29,p||null==m.return||m.return();case 31:if(e.prev=31,!f){e.next=34;break}throw y;case 34:return e.finish(31);case 35:return e.finish(28);case 36:r({type:"wallet/saveCurrent",payload:u});case 37:case"end":return e.stop()}}),e,this,[[20,24,28,36],[29,,31,35]])}))),function(e){return c.apply(this,arguments)})},{key:"loadTransactions",value:function(e){if(e&&-1!==e){var t=this.props,n=t.currentWallet,r=t.match.params.tk,a={wid:e};3===n.token&&(a.token=r||"eth"),this.props.dispatch({type:"service/queryTransaction",payload:a})}else this.props.dispatch({type:"wallet/saveTransaction",payload:{transactions:[]}})}},{key:"render",value:function(){return a.a.createElement("div",{className:i.a.container},a.a.createElement("div",{className:i.a.detail}))}}])&&l(n.prototype,r),o&&l(n,o),t}(r.Component)},1168:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));n(568);var r,a=n(289),o=(n(561),n(282)),i=n(1),c=n.n(i),u=n(165),s=n(1091),l=n(74),p=n(138),f=n(1049),y=n.n(f),m=n(19);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,c,"next",e)}function c(e){b(o,r,a,i,c,"throw",e)}i(void 0)}))}}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=Object(u.connect)((function(e){var t=e.user,n=e.wallet,r=e.loading.effects;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){j(e,t,n[t])}))}return e}({},t,n,{partiesLoading:r["wallet/queryParties"]||r["wallet/checkOnline"]||!1})}))(r=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=g(this,w(t).call(this,e))).state={loading:!1},n}var n,r,i,u,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:(f=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.checkStatus();case 1:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"checkStatus",value:(u=h(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.currentWallet,r=t.dispatch,this.setState({loading:!0}),n.parties){e.next=5;break}return e.next=5,r({type:"wallet/queryParties",payload:{id:n.id}});case 5:if(0!==n.status){e.next=8;break}return e.next=8,r({type:"wallet/checkOnline",payload:{id:n.id,users:n.parties}});case 8:if(a=this.props,o=a.approve,i=a.txid,c=n.parties,!(o&&o.length>0)){e.next=15;break}return e.next=13,l.a.querySignDetail(i);case 13:u=e.sent,c.forEach((function(e,t){c[t].time="";for(var n=0;n<u.length;n++)e.uid===u[n].uid&&(c[t].time=u[n].createtime,c[t].status=u[n].status)}));case 15:this.setState({parties:c}),this.setState({loading:!1});case 17:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=e.currentWallet,n=e.visible,r=e.partiesLoading,i=e.cancel,u=e.approve,l=e.st,f=t.name,d=t.share,b=t.status,h=t.createtime,v=this.state,g=v.parties,w=v.loading;return c.a.createElement(a.a,{width:600,title:null,visible:n,footer:null,onCancel:i},c.a.createElement("div",{className:y.a.body},c.a.createElement("div",{className:y.a.title},"".concat(f," - ").concat(Object(m.a)("key_share_members"))),c.a.createElement("div",{className:y.a.desc},Object(m.a)("created_on")," ",Object(s.b)(h)," | ",d," ",Object(m.a)("members")," ",u&&"| ".concat(u.length," ").concat(Object(m.a)("signee_signed"))),c.a.createElement(o.a,{spinning:r||w},g&&g.map((function(e,t){var n=e.user,r=e.online,a=e.uid,o=e.time;if(n)return 0===b?c.a.createElement("div",{className:y.a.item,key:n},c.a.createElement(p.a,{type:r?"iconicon-keyshare-member-online":"iconicon-keyshare-member-offline"}),c.a.createElement("span",{className:y.a.no},t+1),c.a.createElement("span",{className:y.a.email},n),1===e.status?c.a.createElement("span",{className:y.a.joined},Object(m.a)("joined").toUpperCase()):c.a.createElement("span",{className:y.a.pending},Object(m.a)("pending").toUpperCase())):c.a.createElement("div",{className:y.a.item,key:n},r?c.a.createElement(p.a,{type:"iconicon-keyshare-member-online"}):c.a.createElement(p.a,{type:"iconicon-keyshare-member-offline"}),c.a.createElement("span",{className:y.a.no},t+1),c.a.createElement("span",{className:y.a.email},n),u&&c.a.createElement("span",{className:y.a.time},Object(s.b)(o)),u&&(u.indexOf(a)>-1?c.a.createElement("span",{className:y.a.signed},Object(m.a)("signed").toUpperCase()):c.a.createElement("span",{className:y.a.pending},Object(m.a)(2===l?"unsigned2":"unsigned").toUpperCase())))})))))}}])&&v(n.prototype,r),i&&v(n,i),t}(i.Component))||r}}]);