(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1124:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"j",(function(){return y})),n.d(t,"i",(function(){return d})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return v})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return w})),n.d(t,"f",(function(){return k})),n.d(t,"a",(function(){return _}));n(1141);var r=n(3),a=n.n(r),o=n(60),i=n.n(o),c=n(284),s=n(52),u=n.n(s).a.parse(window.location.search),l=window.location;function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return e?("string"==typeof e&&/^\d+$/.test(e)&&(e=parseInt(e,10)),a()(e).format(t)):e}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";if(!e)return"";var n=e;"number"==typeof e?n=new Date(e):"string"==typeof e&&(n=new Date(+e));var r={"y+":n.getFullYear(),"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),"S+":n.getMilliseconds()};for(var a in r)if(new RegExp("("+a+")").test(t))if("y+"===a)t=t.replace(RegExp.$1,(""+r[a]).substr(4-RegExp.$1.length));else if("S+"===a){var o=RegExp.$1.length;o=1===o?3:o,t=t.replace(RegExp.$1,("00"+r[a]).substr((""+r[a]).length-1,o))}else t=t.replace(RegExp.$1,1===RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length));return t}var m=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/;function y(e){return!!e&&m.test(e)}function d(e){if(!e)return e;if(!parseFloat(e))return 0;for(var t="",n=0,r=(e=(e||0).toString()).split("."),a=r[0],o=a.length-1;o>=0;o--)n++,t=a.charAt(o)+t,n%3||0==o||(t=","+t);return 1===r.length?t:t+"."+r[1]}function h(){return Array.prototype.slice.call(arguments).join(" ")}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[2,7];if(e)return e.length<t[0]+t[1]?e:e.substr(0,t[0])+"****"+e.substr(-t[1],t[1])}var b,g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(!e)return 0;var n=e.toString().split(".");return e.toString().indexOf("e")>-1||n[1]&&n[1].length>t?i()(e).toFixed(t):e},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return i()(e).div(Math.pow(10,t)).toString()},k=function(){var e=c.a.findIndex((function(e){return"usd"===e.currencyCode.toLowerCase()})),t=window.localStorage.getItem("VoltLocalCurrencyIndex")||e,n=c.a[t];return n||(window.localStorage.removeItem("VoltLocalCurrencyIndex"),n=c.a[e]),n};function O(e,t,n,r,a){!function(e,t,n,r,a,o){if(e>n||e<t){var i,c="bigint"==typeof t?"n":"";throw i=o>3?0===t||t===BigInt(0)?">= 0".concat(c," and < 2").concat(c," ** ").concat(8*(o+1)).concat(c):">= -(2".concat(c," ** ").concat(8*(o+1)-1).concat(c,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(c):">= ".concat(t).concat(c," and <= ").concat(n).concat(c),new errors.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){E(t,"offset"),(void 0===e[t]||void 0===e[t+n])&&function(e,t,n){if(Math.floor(e)!==e)throw E(e,n),new errors.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new errors.ERR_BUFFER_OUT_OF_BOUNDS;throw new errors.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}(t,e.length-(n+1))}(r,a,o)}(t,r,a,e,n,7);var o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;var i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,n}function E(e,t){if("number"!=typeof e)throw new errors.ERR_INVALID_ARG_TYPE(t,"number",e)}e.prototype.writeBigUInt64LE=(b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return O(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))},"undefined"==typeof BigInt?BufferBigIntNotDefined:b);var _=function(e){return(u.wss&&u.wss.indexOf("voltpre.bitmesh.com")>-1||l.pathname.indexOf("test.html")>-1)&&(e=e.replace("volt.bitmesh.com","voltpre.bitmesh.com")),e}}).call(this,n(20).Buffer)},1141:function(e,t,n){"use strict";
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */e.exports=function(e,t){if("string"==typeof e)return s(e);if("number"==typeof e)return c(e,t);return null},e.exports.format=c,e.exports.parse=s;var r=/\B(?=(\d{3})+(?!\d))/g,a=/(?:\.0*|(\.[^0]+)0+)$/,o={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:1024*(1<<30)},i=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb)$/i;function c(e,t){if(!Number.isFinite(e))return null;var n=Math.abs(e),i=t&&t.thousandsSeparator||"",c=t&&t.unitSeparator||"",s=t&&void 0!==t.decimalPlaces?t.decimalPlaces:2,u=Boolean(t&&t.fixedDecimals),l=t&&t.unit||"";l&&o[l.toLowerCase()]||(l=n>=o.tb?"TB":n>=o.gb?"GB":n>=o.mb?"MB":n>=o.kb?"KB":"B");var f=(e/o[l.toLowerCase()]).toFixed(s);return u||(f=f.replace(a,"$1")),i&&(f=f.replace(r,i)),f+c+l}function s(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,n=i.exec(e),r="b";return n?(t=parseFloat(n[1]),r=n[4].toLowerCase()):(t=parseInt(e,10),r="b"),Math.floor(o[r]*t)}},1148:function(e,t,n){"use strict";var r,a=n(1),o=n.n(a),i=n(165),c=(n(284),n(60)),s=n.n(c),u=n(15),l=n(1124);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=Object(l.f)(),b=Object(i.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}({},e.wallet)}))(r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,y(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.price,n=e.value,r=e.usd,a=e.exchangeRate,i=e.token,c=e.tokenAmount,l=u.v[i||1].name.toLowerCase();if(!t[l])return null;var f=null,p=v.currencyCode.toLowerCase();f=t[l][p]?t[l][p]:s()(t[l].usd).times(a[p]),r&&(f=s()(f).div(t[l].usd).multipliedBy(r));var m=0;return m=3===i?(m=(m=s()(n).times(f)).plus(c||0)).toFixed(2,1):s()(n).div(1e8).times(f).toFixed(2,1),o.a.createElement("span",null,v.symbol,m," ",v.currencyCode)}}])&&p(n.prototype,r),a&&p(n,a),t}(a.Component))||r;t.a=b},1152:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(1),a=n.n(r),o=n(76),i=n(1050),c=n.n(i),s=n(15);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,p(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.className||c.a.icon,t=this.props.token||1;return a.a.createElement("div",{className:e},a.a.createElement(o.a,{type:Object(s.o)(t).icon}))}}])&&l(n.prototype,r),i&&l(n,i),t}(r.Component)},1187:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(1),a=n.n(r),o=n(1049),i=n.n(o);n(18),n(1144);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){s(o,r,a,i,c,"next",e)}function c(e){s(o,r,a,i,c,"throw",e)}i(void 0)}))}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=f(this,p(t).call(this,e))).state={ready:!1},n}var n,r,o,c,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.currentWallet()}},{key:"getWalletId",value:function(e,t){if(void 0===t)for(var n=0;n<e.length;n++){t=e[n].id;break}return t}},{key:"currentWallet",value:(s=u(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.dispatch,r=t.match,a=this.props.currentWallet,o=r.params.id,a.id&&a.id===parseInt(o)){e.next=7;break}return e.next=6,n({type:"service/queryWalletById",payload:{wid:parseInt(o)}});case 6:a=e.sent;case 7:if(1!==a.type){e.next=13;break}if(a.address||a.deposit){e.next=13;break}return e.next=11,n({type:"service/createSingleWalletAddress",payload:{wid:o}});case 11:(i=e.sent)&&n({type:"wallet/saveCurrentAddress",payload:{address:i}});case 13:if(a.change||3===a.token){e.next=18;break}return e.next=16,n({type:2===a.type?"service/createMultiPartyAddress":"service/createSingleWalletAddress",payload:{wid:o,type:2}});case 16:(c=e.sent)&&n({type:"wallet/saveCurrentChangeAddress",payload:{address:c}});case 18:this.ready&&this.ready(parseInt(o));case 19:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getWalletDetail",value:(c=u(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,c,s,u,l,f,p,m,y,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.dispatch,a=n.allWallets,o=n.currentWallet,i=n.ercTokenTimestamp,c=n.ercToken,n.bsvTokenTimestamp,n.bsvToken,s=a[t],o&&o.id==t&&(s=o),s){e.next=5;break}return e.abrupt("return");case 5:if(3===o.token&&c.length<1&&r({type:"wallet/queryErcToken",payload:{timestamp:i}}),s.parties&&!(s.parties.length<1)){e.next=11;break}return e.next=9,r({type:"wallet/queryParties",payload:{id:t}});case 9:u=e.sent,s.parties=u;case 11:if(s.paymail&&!(s.paymail.length<1)){e.next=16;break}return e.next=14,r({type:"service/queryPaymailById",payload:{wid:t}});case 14:l=e.sent,s.paymail=l;case 16:if(!(s.parties&&s.parties.length>0)){e.next=36;break}for(f=!0,p=!1,m=void 0,e.prev=20,y=s.parties[Symbol.iterator]();!(f=(d=y.next()).done);f=!0)(h=d.value).uid===s.uid&&(s.founder=h.user,s.founderId=h.uid);e.next=28;break;case 24:e.prev=24,e.t0=e.catch(20),p=!0,m=e.t0;case 28:e.prev=28,e.prev=29,f||null==y.return||y.return();case 31:if(e.prev=31,!p){e.next=34;break}throw m;case 34:return e.finish(31);case 35:return e.finish(28);case 36:r({type:"wallet/saveCurrent",payload:s});case 37:case"end":return e.stop()}}),e,this,[[20,24,28,36],[29,,31,35]])}))),function(e){return c.apply(this,arguments)})},{key:"loadTransactions",value:function(e){if(e&&-1!==e){var t=this.props,n=t.currentWallet,r=t.match.params,a=r.tk,o=r.tokenId,i={wid:e};3===n.token?i.token=a||"eth":1===n.token&&"bsv"!==a&&(i.token=o),this.props.dispatch({type:"service/queryTransaction",payload:i})}else this.props.dispatch({type:"wallet/saveTransaction",payload:{transactions:[]}})}},{key:"render",value:function(){return a.a.createElement("div",{className:i.a.container},a.a.createElement("div",{className:i.a.detail}))}}])&&l(n.prototype,r),o&&l(n,o),t}(r.Component)},1196:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(1),a=n.n(r),o=n(1053),i=n.n(o);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,l(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.name,n=e.style;if(!t)return null;var r=t.substr(0,1).toUpperCase();return a.a.createElement("div",{className:i.a.logo,style:n},r)}}])&&s(n.prototype,r),o&&s(n,o),t}(r.Component)},589:function(e,t,n){"use strict";n.r(t);n(1198);var r,a,o=n(1209),i=(n(565),n(285)),c=(n(570),n(292)),s=n(1),u=n.n(s),l=n(165),f=n(69),p=n(15),m=n(1124),y=n(1152),d=n(1148),h=n(1196),v=n(287),b=n(76),g=n(1187),w=(n(1153),n(1156)),k=(n(564),n(166)),O=n(18),E=n(1064),_=n.n(E);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function x(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){x(o,r,a,i,c,"next",e)}function c(e){x(o,r,a,i,c,"throw",e)}i(void 0)}))}}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B,A=(r=Object(l.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){I(e,t,n[t])}))}return e}({},e.user,e.wallet,{loading:e.loading.effects["service/createSingleWallet"]})})),Object(f.withRouter)(a=r(a=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=T(t).call(this,e),n=!a||"object"!==j(a)&&"function"!=typeof a?R(r):a,I(R(n),"removeToken",function(){var e=N(regeneratorRuntime.mark((function e(t,r){var a,o,i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,o=a.match,i=a.dispatch,c=a.createCallback,e.next=3,i({type:"service/removeBsvToken",payload:{token:t,wid:parseInt(o.params.id)}});case 3:e.sent?((s=n.state.showList)[r].status=0,n.setState({showList:s}),c(!0)):k.a.error(Object(O.a)("remove_token_error"));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),I(R(n),"addToken",function(){var e=N(regeneratorRuntime.mark((function e(t,r){var a,o,i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,o=a.match,i=a.dispatch,c=a.createCallback,e.next=3,i({type:"service/addBsvToken",payload:{token:t,wid:parseInt(o.params.id)}});case 3:e.sent?((s=n.state.showList)[r].status=1,n.setState({showList:s}),c(!0)):k.a.error(Object(O.a)("add_token_error"));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),I(R(n),"handleChange",(function(e){var t=e.target.value;if(!t)return n.setState({showList:n.state.userToken});var r=n.state.tokens,a=n.searchByKeywords(t,r);n.setState({showList:a})})),n.state={posting:!1,loading:!1,showList:[],tokens:[],userToken:[]},n}var n,r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:(o=N(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.bsvToken,r=t.bsvTokenTimestamp,a=this.props,o=a.currentWallet,i=a.dispatch,c=o.balance?o.balance.balance:[],!(n&&n.length<1)){e.next=11;break}return this.setState({loading:!0}),e.next=7,i({type:"service/queryBsvToken",payload:{timestamp:r}});case 7:s=e.sent,n=s||[],r=new Date(s.timestamp).getTime(),this.setState({loading:!1});case 11:u=JSON.parse(JSON.stringify(n)),l=[],u.forEach((function(e){var t=c.findIndex((function(t){return t.id==e.tokenId}));t>-1?(e.status=1,Object.assign(c[t],e)):l.push(e)})),this.setState({showList:[].concat(S(c),l),tokens:u,userToken:[].concat(S(c),l)});case 15:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"throttle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=(new Date).getTime();return function(){var r=(new Date).getTime();r-n>t&&(e(),n=r)}}},{key:"escapeRegExpWildcards",value:function(e){var t=/([\(\[\{\\\^\$\}\]\)\?\*\+\.])/gim;return e&&t.test(e)?e.replace(t,"\\$1"):e}},{key:"searchByKeywords",value:function(e,t){var n=new RegExp(".*?"+this.escapeRegExpWildcards(e)+".*?","img");return t.filter((function(t){return n.test(t.name)||n.test(t.symbol)||e==t.token}))}},{key:"render",value:function(){var e=this,t=this.state.showList;return u.a.createElement("div",{className:_.a.container},u.a.createElement("div",{className:_.a.header},u.a.createElement("div",{className:_.a.title},Object(O.a)("add_token_accounts"))),u.a.createElement("div",{className:_.a.search},u.a.createElement(w.a,{className:_.a.search_input,placeholder:Object(O.a)("search_token_holder"),onChange:this.handleChange})),u.a.createElement("div",{className:_.a.token_list_wrap},u.a.createElement("div",{className:_.a.user_token_list},u.a.createElement("div",{className:_.a.token},u.a.createElement(y.a,{token:1,className:_.a.coin_icon}),u.a.createElement("span",{className:_.a.token_name},u.a.createElement("span",{style:{fontWeight:"bold"}},"BSV")," | Bitcoin SV")),t.map((function(t,n){var r=t.symbol,a=t.name,o=t.id,i=(t.wid,t.tokenId),c=t.status,s=t.token,l=t.logoURI;if("bsv"!==s)return u.a.createElement("div",{className:_.a.token,key:i||o},l?u.a.createElement("div",{className:_.a.logo_wrap},u.a.createElement("img",{src:Object(m.a)(l),className:_.a.logo})):u.a.createElement(h.a,{name:a,style:{width:25,height:25,lineHeight:"25px",marginRight:8,fontSize:14,fontWeight:500}}),u.a.createElement("span",{className:_.a.token_name},u.a.createElement("span",{style:{fontWeight:"bold"}},r)," | ",a),1===c?u.a.createElement("span",{onClick:function(){return e.removeToken(i||o,n)}},u.a.createElement(b.a,{type:"iconicon-tokenswap-selected",style:{fontSize:"25px"}})):u.a.createElement("span",{onClick:function(){return e.addToken(i||o,n)}},u.a.createElement("span",{className:_.a.circle})))})))))}}])&&P(n.prototype,r),a&&P(n,a),t}(s.Component))||a)||a),W=n(1059),D=n.n(W);n(60);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){M(o,r,a,i,c,"next",e)}function c(e){M(o,r,a,i,c,"throw",e)}i(void 0)}))}}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",(function(){return V}));var V=Object(l.connect)((function(e){var t=e.user,n=e.wallet,r=e.loading.effects;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){G(e,t,n[t])}))}return e}({},t,n,{loading:r["service/queryWalletById"]||r["service/queryBsvToken"]||r["wallet/saveCurrent"],creatingAddress:r["service/createSingleWalletAddress"]||!1})}))(B=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=q(t).call(this,e),n=!a||"object"!==L(a)&&"function"!=typeof a?U(r):a,G(U(n),"switchDisplay",(function(){var e=n.state.hideAmount;n.props.dispatch({type:"user/switchDisplay"}),n.setState({hideAmount:!e})})),G(U(n),"showDrawer",(function(){n.setState({drawer_visible:!0})})),G(U(n),"closeDrawer",(function(){n.setState({drawer_visible:!1})})),G(U(n),"renderTokenName",(function(e){var t=e.id,r=e.name,a=(e.utxo,e.wid),o=e.symbol,i=e.token,c=e.logoURI,s=null,l=null;return"bsv"===i?(s=u.a.createElement(y.a,{token:1,className:D.a.coin_icon}),l="".concat(p.v[1].name," | ").concat(p.v[1].fullname)):(s=c?u.a.createElement("div",{className:D.a.logo_wrap},u.a.createElement("img",{src:Object(m.a)(c),className:D.a.logo})):u.a.createElement(h.a,{name:o||i,style:{width:25,height:25,lineHeight:"25px",marginRight:8,fontSize:14,fontWeight:500}}),l=o?"".concat(o," | ").concat(r):i),u.a.createElement("div",{className:D.a.part1,onClick:function(){return n.gotoMessageList(a,o,t)}},s,u.a.createElement("div",{className:D.a.coin_name},u.a.createElement("div",{className:D.a.name_box},u.a.createElement("div",{className:D.a.name},l))))})),G(U(n),"gotoInfoPage",(function(e){n.props.history.push({pathname:"/money/walletinfo/".concat(e)})})),G(U(n),"renderInfo",(function(){var e=n.props,t=e.match,r=e.currentWallet,a=t.params.id,o=n.state.hideAmount,i=o?u.a.createElement(b.a,{type:"iconhide"}):u.a.createElement(b.a,{type:"iconshow"});return u.a.createElement("div",{className:D.a.info},u.a.createElement(y.a,{token:1}),u.a.createElement("div",{className:D.a.wallet_name,onClick:function(){return n.gotoInfoPage(a)}},r.name," ",u.a.createElement("span",null,u.a.createElement(b.a,{type:"iconwallet-info"}))),u.a.createElement("div",{className:D.a.total_assets},u.a.createElement("div",{className:D.a.total},o?p.r:u.a.createElement(d.a,{value:r.total,tokenAmount:r.usd,token:1})," ",u.a.createElement("span",{onClick:n.switchDisplay,className:D.a.show_balance},i))),u.a.createElement("div",{className:D.a.add},u.a.createElement("a",{className:"ant-dropdown-link",onClick:n.showDrawer},u.a.createElement(b.a,{type:"iconcreatewallet",style:{fontSize:18}}))))})),G(U(n),"gotoMessageList",(function(e,t,r){var a=t||"bsv";n.props.history.push({pathname:"/money/list/".concat(e,"/").concat(r,",").concat(a)})})),G(U(n),"gotoTransfer",(function(e,t,r){t?n.props.history.push({pathname:"/money/transfer/1/".concat(e,"/").concat(r,",").concat(t)}):n.props.history.push({pathname:"/money/transfer/1/".concat(e)})})),G(U(n),"gotoReceive",(function(e){n.props.history.push({pathname:"/money/receive/".concat(e)})})),G(U(n),"goHome",(function(){n.props.history.push({pathname:"/money/home/0"})})),n.state={joining:0,receiveModalVisible:!1,hideAmount:window.localStorage.getItem(p.b.HIDEAMOUNT)||0,drawer_visible:!1},n}var n,r,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,e),n=t,(r=[{key:"getWalletId",value:function(){return parseInt(this.props.match.params.id)}},{key:"ready",value:function(){this.getWalletDetail(this.getWalletId())}},{key:"componentDidMount",value:function(){this.updateBsv()}},{key:"updateBsv",value:(s=F(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0}),t=[],n=this.props,r=n.dispatch,a=n.bsvToken,o=n.bsvTokenTimestamp,t.push(r({type:"service/queryWalletById",payload:{wid:this.getWalletId()}})),a.length<1&&t.push(r({type:"service/queryBsvToken",payload:{timestamp:o}})),Promise.all(t).then(function(){var e=F(regeneratorRuntime.mark((function e(t){var n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t[1]&&(a=t[1].token),o=-1,t[0].balance&&((c=t[0].balance.balance).forEach((function(e,t){if("bsv"===e.token&&(n=e,o=t),a&&a.length>0){var r=a.find((function(t){return e.token==t.name.toLowerCase()}));r&&Object.assign(e,r)}})),o>-1&&(c.splice(o,1),c.unshift(n))),e.next=5,r({type:"wallet/saveCurrent",payload:t[0]});case 5:i.setState({loading:!1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"createCallback",value:function(e){this.updateBsv()}},{key:"renderBsvList",value:function(){var e=this,t=this.state.hideAmount,n=this.props.currentWallet;if(n.id!==this.getWalletId())return u.a.createElement(v.a,null);var r=n.id;return u.a.createElement("div",{className:D.a.list_container,style:{height:473,padding:"25px 30px 0"}},n.balance&&n.balance.balance.map((function(n){var a,o=n.token,i=n.value,c=void 0===i?0:i,s=n.id,l=n.name,f=n.symbol,y=n.decimalNum;return n.wid=r,a=Object(m.b)(Object(m.d)(c,y||8)),u.a.createElement("div",{className:D.a.list_item,key:s},e.renderTokenName(n),u.a.createElement("div",{className:D.a.part2},u.a.createElement("span",{className:D.a.amount},t?p.r:a)," ",u.a.createElement("span",{className:D.a.unit},f||l||o)),u.a.createElement("div",{className:D.a.part3},u.a.createElement("div",{className:D.a.transfer,onClick:function(){return e.gotoTransfer(r,f,s)}},u.a.createElement(b.a,{type:"iconicon-send"})," ",Object(O.a)("transfer")),u.a.createElement("span",{className:D.a.receive,onClick:function(){return e.gotoReceive(r)}},u.a.createElement(b.a,{type:"iconreceive"})," ",Object(O.a)("collection"))))})))}},{key:"renderAddressCreating",value:function(){return u.a.createElement(c.a,{title:Object(O.a)("collection"),visible:this.props.creatingAddress,footer:null,onCancel:this.hideReceiveDialog},u.a.createElement("div",{className:D.a.qrcodeWrap},u.a.createElement(v.a,{className:D.a.loading_container}),u.a.createElement("p",null,"Generating address")))}},{key:"render",value:function(){var e=this,t=this.state.loading;return u.a.createElement("div",{className:D.a.container},u.a.createElement(i.a,{spinning:t},this.renderInfo(),this.renderBsvList()),this.renderAddressCreating(),u.a.createElement("span",{className:D.a.goback,onClick:this.goHome}," ",Object(O.a)("back")),this.state.drawer_visible&&u.a.createElement(o.a,{width:400,title:"",placement:"right",closable:!1,onClose:this.closeDrawer,visible:this.state.drawer_visible,getContainer:!1,style:{position:"absolute"}},u.a.createElement(A,{createCallback:function(t){return e.createCallback(t)}})))}}])&&$(n.prototype,r),a&&$(n,a),t}(g.a))||B}}]);